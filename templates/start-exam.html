<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Start Exam - Testifyy</title>

  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4605579560460422"
       crossorigin="anonymous"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-4605579560460422",
            enable_page_level_ads: true
       });
  </script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet" />

  <style>
    * { box-sizing: border-box; }
    body {
      margin: 0;
      font-family: 'Poppins', sans-serif;
      background: #f0f2f5;
      color: #333;
    }
    header {
      background: #4f46e5;
      padding: 20px;
      text-align: center;
      color: white;
    }
    header h1 {
      margin: 0;
      font-size: 24px;
    }
    .container {
      max-width: 720px;
      margin: 30px auto;
      background: white;
      padding: 35px 25px;
      border-radius: 12px;
      box-shadow: 0 4px 16px rgba(0,0,0,0.08);
    }
    h2 {
      color: #4f46e5;
      font-size: 22px;
      margin-bottom: 10px;
    }
    p.description {
      font-size: 15px;
      color: #555;
      margin-bottom: 15px;
    }
    label {
      display: block;
      margin: 12px 0 5px;
      font-weight: 600;
      font-size: 15px;
    }
    select, button {
      width: 100%;
      padding: 12px;
      margin-bottom: 18px;
      border-radius: 8px;
      border: 1px solid #ccc;
      font-size: 15px;
    }
    button {
      background: #4f46e5;
      color: white;
      font-weight: bold;
      cursor: pointer;
      transition: background 0.3s ease;
    }
    button:hover {
      background: #3730a3;
    }
    /* Removed .ads-box since manual ad units are being removed. 
       If you want to keep similar spacing for content, you might adjust other elements. */
    .extra-info {
      background: #f9fafb;
      border: 1px solid #e5e7eb;
      border-radius: 10px;
      padding: 20px;
      margin-top: 30px;
    }
    .extra-info h3 {
      color: #4f46e5;
      margin-bottom: 10px;
      font-size: 18px;
    }
    .extra-info ul {
      padding-left: 20px;
      color: #444;
      font-size: 14px;
    }
    footer {
      text-align: center;
      padding: 20px;
      font-size: 14px;
      color: #777;
    }
    footer a {
      color: #4f46e5;
      text-decoration: none;
    }
    .summary-box {
      background: #eef2ff;
      border-left: 5px solid #4f46e5;
      padding: 15px 20px;
      margin: 25px 0;
      border-radius: 8px;
      font-size: 14.5px;
      color: #333;
      line-height: 1.6;
    }
    .spinner {
      width: 16px;
      height: 16px;
      border: 2px solid white;
      border-top: 2px solid #4f46e5;
      border-radius: 50%;
      animation: spin 0.6s linear infinite;
      display: inline-block;
      margin-left: 10px;
      vertical-align: middle;
    }
    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
    @media (max-width: 768px) {
      .container {
        margin: 20px;
        padding: 25px 15px;
      }
    }
  </style>
</head>
<body>

  <header>
    <h1><i class="fas fa-pen-nib"></i> Testifyy - AI Exam Generator</h1>
  </header>

  <div class="container">

    <h2>Start Your Custom Practice Test</h2>

    <div class="summary-box">
      <strong>How it works:</strong> Testifyy uses AI to instantly generate practice and mock tests based on your chosen subject, section, and topic. You can customize each test or leave the topic blank for random questions. It’s designed to help you prepare smarter and faster.
    </div>

    <p class="description">
      This tool supports TNPSC, SSC, RRB, and other major exams. You don’t need to log in — just pick your options and go. Whether you’re revising or testing speed, this simulator adapts to your needs.
    </p>

    <form method="POST" action="{{ url_for('generate_questions') }}" onsubmit="showSpinner()">
      <label for="mode">Mode</label>
      <select name="mode" id="mode">
        <option value="practice">Practice</option>
        <option value="mock">Mock Test</option>
      </select>

      <label for="exam">Exam</label>
      <select name="exam" id="exam">
        {% for ex in exams %}
        <option value="{{ ex }}">{{ ex }}</option>
        {% endfor %}
      </select>

      <label for="section">Section</label>
      <select name="section" id="section"></select>

      <div id="topicDiv">
        <label for="topic">Topic</label>
        <select name="topic" id="topic"></select>
      </div>

      <button type="submit" id="startBtn"><i class="fas fa-play"></i> Start Exam</button>
    </form>

    <div class="extra-info">
      <h3>Exam Preparation Tips</h3>
      <ul>
        <li>Start with your strongest subjects to build momentum.</li>
        <li>Choose mock mode to simulate real exam time limits.</li>
        <li>Re-attempt incorrect topics to improve retention.</li>
        <li>Use the "AI Doubt Solver" for any confusing concepts.</li>
      </ul>
    </div>

    <div class="extra-info">
      <h3>Frequently Asked Questions</h3>
      <ul>
        <li><strong>Is this platform free?</strong> Yes, 100% free for students.</li>
        <li><strong>How are questions generated?</strong> We use advanced AI to match syllabus patterns.</li>
        <li><strong>Can I skip the topic selection?</strong> Yes, it's optional for quick tests.</li>
        <li><strong>Where to report errors?</strong> Use our <a href="/contact">Contact page</a>.</li>
      </ul>
    </div>

    </div>

  <footer>
    © 2025 Testifyy • Powered by AI • <a href="/privacy">Privacy Policy</a>
  </footer>

  <script>
    const sections = {{ sections | tojson }};
    const subTopics = {{ sub_topics | safe }};
    const examSelect = document.getElementById('exam');
    const sectionSelect = document.getElementById('section');
    const topicSelect = document.getElementById('topic');
    const topicDiv = document.getElementById('topicDiv');

    function updateSections() {
      const selectedExam = examSelect.value;
      sectionSelect.innerHTML = '';
      sections[selectedExam].forEach(sec => {
        const option = document.createElement('option');
        option.value = sec;
        option.textContent = sec;
        sectionSelect.appendChild(option);
      });
      updateTopics();
    }

    function updateTopics() {
      const selectedExam = examSelect.value;
      const selectedSection = sectionSelect.value;
      topicSelect.innerHTML = '';
      const topics = subTopics[selectedExam]?.[selectedSection] || [];
      topicDiv.style.display = topics.length ? 'block' : 'none';
      topics.forEach(topic => {
        const option = document.createElement('option');
        option.value = topic;
        option.textContent = topic;
        topicSelect.appendChild(option);
      });
    }

    examSelect.addEventListener('change', updateSections);
    sectionSelect.addEventListener('change', updateTopics);
    window.onload = updateSections;

    // Spinner trigger
    function showSpinner() {
      const btn = document.getElementById('startBtn');
      btn.disabled = true;
      btn.innerHTML = 'Loading... <span class="spinner"></span>';
    }
  </script>

</body>
</html>